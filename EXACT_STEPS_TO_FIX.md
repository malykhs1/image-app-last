# üî• –¢–æ—á–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

**–í–∞–∂–Ω–æ:** –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –°–¢–†–û–ì–û –ø–æ –ø–æ—Ä—è–¥–∫—É!

---

## –®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Anvil –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥

### A. –û—Ç–∫—Ä–æ–π—Ç–µ Anvil Editor
https://anvil.works/build ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç

### B. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
–û—Ç–∫—Ä–æ–π—Ç–µ **`Server Code` ‚Üí `Shopify_API`**

–ù–∞–π–¥–∏—Ç–µ –º–µ—Ç–æ–¥ `create_product_with_variants` (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 89)

–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ —Å—Ç—Ä–æ–∫ 137-154 –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–º:

```python
"metafields": [{
  "namespace": "anvil",
  "key": "id",
  "type": "single_line_text_field",
  "value": anvil_id
}],  # ‚Üê –ù–ï–¢ seo.hidden!
"variants": [
  {
    "optionValues": [{
      "optionName": "Size",
      "name": "40x40cm"
    }],
    "price": PRICE,
    "inventoryPolicy": "CONTINUE",  # ‚Üê –≠–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨!
    "inventoryItem": {
      "tracked": False
    }
  },
]
```

**–ï—Å–ª–∏ –ù–ï–¢ —ç—Ç–∏—Ö —Å—Ç—Ä–æ–∫:**
1. –í—Ä—É—á–Ω—É—é —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤—ã—à–µ
2. –í—Å—Ç–∞–≤—å—Ç–µ –≤ Anvil Editor
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+S)

---

## –®–∞–≥ 2: –ñ–ï–°–¢–ö–ò–ô –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Anvil

### –í Anvil Editor:
1. **Run** ‚Üí **Stop** (–ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ)
2. **–ü–æ–¥–æ–∂–¥–∏—Ç–µ 10 —Å–µ–∫—É–Ω–¥**
3. **–ù–∞–∂–º–∏—Ç–µ Ctrl+Shift+R** (hard refresh —Å—Ç—Ä–∞–Ω–∏—Ü—ã Anvil Editor)
4. **Run** ‚Üí **Start**

---

## –®–∞–≥ 3: –û—á–∏—Å—Ç–∏—Ç–µ –í–°–Æ –∫–æ—Ä–∑–∏–Ω—É –≤ Shopify

1. –û—Ç–∫—Ä–æ–π—Ç–µ **https://paraloom.co.il/cart**
2. –£–¥–∞–ª–∏—Ç–µ **–ö–ê–ñ–î–´–ô** —Ç–æ–≤–∞—Ä
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ—Ä–∑–∏–Ω–∞ **–ü–û–õ–ù–û–°–¢–¨–Æ –ü–£–°–¢–ê**
4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+R) - –∫–æ—Ä–∑–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å "Cart is empty"

---

## –®–∞–≥ 4: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ù–û–í–û–ú –æ–∫–Ω–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ

**–ü–æ—á–µ–º—É:** –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–µ—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞

1. **Ctrl+Shift+N** (Chrome) –∏–ª–∏ **Cmd+Shift+N** (Safari)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å iframe:
   ```
   https://paraloom.co.il/pages/your-page
   ```
3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
4. Console ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç **"top"** (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

---

## –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ –ù–û–í–´–ô artwork

**–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–Ω—É—Ç—Ä–∏ iframe:**

1. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ä—ã–π artwork ‚Üí –Ω–∞–∂–º–∏—Ç–µ **"Close"**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ **–®–∞–≥ 1**
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ **–ù–û–í–û–ï –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** (–Ω–µ —Ç–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–Ω—å—à–µ)
4. –ü—Ä–æ–π–¥–∏—Ç–µ –®–∞–≥ 2 ‚Üí –®–∞–≥ 3
5. **–ù–ï –ö–õ–ò–ö–ê–ô–¢–ï "Add to cart" –ï–©–ï!**

---

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### A. –í –∫–æ–Ω—Å–æ–ª–∏ iframe (F12 ‚Üí Console ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ iframe)
–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
Received variant_id: 44270XXXXXXXXX, anvil_id: ...
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç **variant_id**!

### B. –û—Ç–∫—Ä–æ–π—Ç–µ Shopify Admin
1. **Products** ‚Üí –Ω–∞–π–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Metafields**:
   - ‚úÖ `anvil.id` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
   - ‚ùå `seo.hidden` - **–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å!**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Variants** ‚Üí **40x40cm** ‚Üí **Inventory**:
   - ‚úÖ "Continue selling when out of stock" - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ

**–ï—Å–ª–∏ `seo.hidden` –ï–°–¢–¨** ‚Üí –∫–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –ù–ï –æ–±–Ω–æ–≤–∏–ª—Å—è! –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –®–∞–≥—É 1.

**–ï—Å–ª–∏ "Continue selling" –í–´–ö–õ–Æ–ß–ï–ù–û** ‚Üí –∫–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –ù–ï –æ–±–Ω–æ–≤–∏–ª—Å—è! –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –®–∞–≥—É 1.

---

## –®–∞–≥ 7: –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –ù–ê–ü–†–Ø–ú–£–Æ

**–í –∫–æ–Ω—Å–æ–ª–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ù–ï iframe!):**

```javascript
// –í—Å—Ç–∞–≤—å—Ç–µ –í–ê–® variant_id –∏–∑ –®–∞–≥–∞ 6
const variantId = "44270XXXXXXXXX";  // ‚Üê –ó–ê–ú–ï–ù–ò–¢–ï!

fetch('/cart/add.js', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({
    items: [{id: variantId, quantity: 1}]
  })
})
.then(r => {
  console.log('üìä Status:', r.status, r.statusText);
  return r.json();
})
.then(data => {
  if (data.status === 422 || data.status === 'bad_request') {
    console.error('‚ùå ERROR:', data);
  } else {
    console.log('‚úÖ SUCCESS:', data);
  }
})
.catch(err => console.error('‚ùå CATCH:', err));
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

### ‚úÖ Status: 200 + SUCCESS
```
üìä Status: 200 OK
‚úÖ SUCCESS: {id: "...", quantity: 1, ...}
```
**‚Üí –¢–æ–≤–∞—Ä –ü–†–ê–í–ò–õ–¨–ù–´–ô! –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ postMessage.**

### ‚ùå Status: 422 + ERROR
```
üìä Status: 422 Unprocessable Entity
‚ùå ERROR: {status: 422, message: "already sold out"}
```
**‚Üí –¢–æ–≤–∞—Ä –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô! –ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –®–∞–≥—É 1.**

---

## –®–∞–≥ 8: –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø—Ä–æ—à–µ–ª (Status 200)

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

1. –í iframe –Ω–∞–∂–º–∏—Ç–µ **"Add to cart"**
2. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:**
```
üì® Received postMessage: {...}
‚è≠Ô∏è Skipping frame (add_frame=false)
üì¶ Final items array: [{"id":"...","quantity":1}]
üöÄ Sending request to /cart/add.js...
üì° Response status: 200 OK
‚úÖ Successfully added to cart
```

**–ï—Å–ª–∏ Status: 200** ‚Üí **–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!** üéâ

**–ï—Å–ª–∏ Status: 422** ‚Üí **–ü—Ä–æ–±–ª–µ–º–∞ –≤ postMessage –∏–ª–∏ –≤ –∫–æ–¥–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏**

---

## üìä –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å | –¢–µ—Å—Ç —á–µ—Ä–µ–∑ iframe | –í—ã–≤–æ–¥ |
|-------------------|-------------------|-------|
| ‚úÖ 200 | ‚úÖ 200 | –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! |
| ‚úÖ 200 | ‚ùå 422 | –ü—Ä–æ–±–ª–µ–º–∞ –≤ postMessage |
| ‚ùå 422 | ‚ùå 422 | –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ |

---

## üÜò –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ:

1. **–°–∫—Ä–∏–Ω—à–æ—Ç Metafields —Ç–æ–≤–∞—Ä–∞** –≤ Shopify Admin
2. **–°–∫—Ä–∏–Ω—à–æ—Ç Inventory settings** –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ç–æ–≤–∞—Ä–∞
3. **–ü–æ–ª–Ω—ã–π Response** –∏–∑ Network tab (–ø–æ—Å–ª–µ –∫–ª–∏–∫–∞ "Add to cart")
4. **–õ–æ–≥–∏ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏** (–∏ iframe, –∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

---

**–ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –®–∞–≥–∞ 1 –∏ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –°–¢–†–û–ì–û –ø–æ –ø–æ—Ä—è–¥–∫—É!** üöÄ
