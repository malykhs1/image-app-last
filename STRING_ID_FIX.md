# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ID —Ç–æ–≤–∞—Ä–æ–≤ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ —á–∏—Å–µ–ª

**–î–∞—Ç–∞:** 2026-02-04  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ 422 "already sold out" –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

Shopify `/cart/add.js` API —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã `id` –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ **—Å—Ç—Ä–æ–∫–∞**, –∞ –Ω–µ –∫–∞–∫ —á–∏—Å–ª–æ:

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–±—ã–ª–æ):
```json
{
  "items": [
    {
      "id": 44270397522035,
      "quantity": 1
    }
  ]
}
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (—Å—Ç–∞–ª–æ):
```json
{
  "items": [
    {
      "id": "44270397522035",
      "quantity": 1
    }
  ]
}
```

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. Python - `client_code/Creation/__init__.py` (—Å—Ç—Ä–æ–∫–∏ 22, 25)

**–ë—ã–ª–æ:**
```python
message = {
  'action': 'add',
  'variant_id': int(variant_id),  # ‚ùå –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —á–∏—Å–ª–æ
  'frame_id': frame_variant,
}
```

**–°—Ç–∞–ª–æ:**
```python
message = {
  'action': 'add',
  'variant_id': str(variant_id),  # ‚úÖ –Ø–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É
  'frame_id': str(frame_variant),  # ‚úÖ –Ø–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É
}
```

---

### 2. JavaScript - `shopify_page_script.js` (—Å—Ç—Ä–æ–∫–∏ 34, 41)

**–ë—ã–ª–æ:**
```javascript
const items = [{
  id: data.variant_id,  // ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å —á–∏—Å–ª–æ
  quantity: 1
}];

if (data.add_frame && data.frame_id) {
  items.push({
    id: data.frame_id,  // ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å —á–∏—Å–ª–æ
    quantity: 1
  });
}
```

**–°—Ç–∞–ª–æ:**
```javascript
const items = [{
  id: String(data.variant_id),  // ‚úÖ –Ø–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É
  quantity: 1
}];

if (data.add_frame && data.frame_id) {
  items.push({
    id: String(data.frame_id),  // ‚úÖ –Ø–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É
    quantity: 1
  });
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏:

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console, –∏ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
üöÄ Sending request to /cart/add.js with body: 
{
  "items": [
    {
      "id": "44270397522035",    ‚Üê –°—Ç—Ä–æ–∫–∞, –Ω–µ —á–∏—Å–ª–æ
      "quantity": 1
    },
    {
      "id": "43092453359731",    ‚Üê –°—Ç—Ä–æ–∫–∞, –Ω–µ —á–∏—Å–ª–æ
      "quantity": 1
    }
  ]
}
```

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ:** ID –æ–±–µ—Ä–Ω—É—Ç—ã –≤ –∫–∞–≤—ã—á–∫–∏ `"..."` - —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ç—Ä–æ–∫–∞.

---

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:

```javascript
// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (—Å—Ç—Ä–æ–∫–∞)
fetch('/cart/add.js', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({
    items: [{id: "44270397522035", quantity: 1}]  // ‚Üê –°—Ç—Ä–æ–∫–∞
  })
})
.then(r => r.json())
.then(data => console.log('‚úÖ Success:', data))
.catch(err => console.error('‚ùå Error:', err));
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚ùå POST /cart/add.js 422 (Unprocessable Content)
‚ùå Error: The product is already sold out
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚úÖ POST /cart/add.js 200 (OK)
‚úÖ Successfully added to cart
```

---

## üéØ –í–∞–∂–Ω–æ

### –≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:
- ‚úÖ –ù–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ (—Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)
- ‚úÖ –¢–æ–≤–∞—Ä–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ inventory

### –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è:
- ‚ùå –°—Ç–∞—Ä—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å `seo.hidden = 1`
- ‚ùå –¢–æ–≤–∞—Ä–æ–≤ –±–µ–∑ `inventoryPolicy: CONTINUE`

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π artwork –∏–ª–∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ —Å—Ç–∞—Ä—ã–π —Ç–æ–≤–∞—Ä –≤—Ä—É—á–Ω—É—é (—Å–º. `FIX_EXISTING_PRODUCT.md`)

---

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

1. `client_code/Creation/__init__.py` (—Å—Ç—Ä–æ–∫–∏ 22, 25)
2. `shopify_page_script.js` (—Å—Ç—Ä–æ–∫–∏ 34, 41)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** Shopify Cart API 2024-10
